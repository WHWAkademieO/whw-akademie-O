(()=>{"use strict";var t,e={474:(t,e,s)=>{const i=window.wp.blocks,n=window.wp.element,o=window.React,r=window.ReactDOM;function a(t){const e=window.getComputedStyle(t);return Math.max(parseInt(e["margin-top"],10),parseInt(e["margin-bottom"],10))+t.getBoundingClientRect().height}function l(t,e=0,s=0){t&&(null!==e&&null!==s?t.style.transform=`translate(${s}px, ${e}px)`:t.style.removeProperty("transform"))}function h(t,e,s){t&&(t.style.transition=`transform ${e}ms${s?` ${s}`:""}`)}const c=t=>{let e=[],s=null;const i=(...i)=>{e=i,s||(s=requestAnimationFrame((()=>{s=null,t(...e)})))};return i.cancel=()=>{s&&cancelAnimationFrame(s)},i};function d(t,e){const s=["input","textarea","select","option","optgroup","video","audio","button","a"],i=["button","link","checkbox","tab"];for(;t!==e;){if(t.getAttribute("data-movable-handle"))return!1;if(s.includes(t.tagName.toLowerCase()))return!0;const e=t.getAttribute("role");if(e&&i.includes(e.toLowerCase()))return!0;if("label"===t.tagName.toLowerCase()&&t.hasAttribute("for"))return!0;t.tagName&&(t=t.parentElement)}return!1}const u=200;class g extends o.Component{constructor(t){super(t),this.listRef=o.createRef(),this.ghostRef=o.createRef(),this.topOffsets=[],this.itemTranslateOffsets=[],this.initialYOffset=0,this.lastScroll=0,this.lastYOffset=0,this.lastListYOffset=0,this.needle=-1,this.afterIndex=-2,this.state={itemDragged:-1,itemDraggedOutOfBounds:-1,selectedItem:-1,initialX:0,initialY:0,targetX:0,targetY:0,targetHeight:0,targetWidth:0,liveText:"",scrollingSpeed:0,scrollWindow:!1},this.doScrolling=()=>{const{scrollingSpeed:t,scrollWindow:e}=this.state,s=this.listRef.current;window.requestAnimationFrame((()=>{e?window.scrollTo(window.pageXOffset,window.pageYOffset+1.5*t):s.scrollTop+=t,0!==t&&this.doScrolling()}))},this.getChildren=()=>this.listRef&&this.listRef.current?Array.from(this.listRef.current.children):(console.warn("No items found in the List container. Did you forget to pass & spread the `props` param in renderList?"),[]),this.calculateOffsets=()=>{this.topOffsets=this.getChildren().map((t=>t.getBoundingClientRect().top)),this.itemTranslateOffsets=this.getChildren().map((t=>a(t)))},this.getTargetIndex=t=>this.getChildren().findIndex((e=>e===t.target||e.contains(t.target))),this.onMouseOrTouchStart=t=>{this.dropTimeout&&this.state.itemDragged>-1&&(window.clearTimeout(this.dropTimeout),this.finishDrop());const e=(s=t).touches&&s.touches.length||s.changedTouches&&s.changedTouches.length;var s;if(!e&&0!==t.button)return;const i=this.getTargetIndex(t);if(-1===i||this.props.values[i]&&this.props.values[i].disabled)return void(-1!==this.state.selectedItem&&(this.setState({selectedItem:-1}),this.finishDrop()));const n=this.getChildren()[i],o=n.querySelector("[data-movable-handle]");if((!o||o.contains(t.target))&&!d(t.target,n)){if(t.preventDefault(),this.props.beforeDrag&&this.props.beforeDrag({elements:this.getChildren(),index:i}),e){const t={passive:!1};n.style.touchAction="none",document.addEventListener("touchend",this.schdOnEnd,t),document.addEventListener("touchmove",this.schdOnTouchMove,t),document.addEventListener("touchcancel",this.schdOnEnd,t)}else{document.addEventListener("mousemove",this.schdOnMouseMove),document.addEventListener("mouseup",this.schdOnEnd);const t=this.getChildren()[this.state.itemDragged];t&&t.style&&(t.style.touchAction="")}this.onStart(n,e?t.touches[0].clientX:t.clientX,e?t.touches[0].clientY:t.clientY,i)}},this.getYOffset=()=>{const t=this.listRef.current?this.listRef.current.scrollTop:0;return window.pageYOffset+t},this.onStart=(t,e,s,i)=>{this.state.selectedItem>-1&&(this.setState({selectedItem:-1}),this.needle=-1);const n=t.getBoundingClientRect(),o=window.getComputedStyle(t);this.calculateOffsets(),this.initialYOffset=this.getYOffset(),this.lastYOffset=window.pageYOffset,this.lastListYOffset=this.listRef.current.scrollTop,this.setState({itemDragged:i,targetX:n.left-parseInt(o["margin-left"],10),targetY:n.top-parseInt(o["margin-top"],10),targetHeight:n.height,targetWidth:n.width,initialX:e,initialY:s})},this.onMouseMove=t=>{t.cancelable&&t.preventDefault(),this.onMove(t.clientX,t.clientY)},this.onTouchMove=t=>{t.cancelable&&t.preventDefault(),this.onMove(t.touches[0].clientX,t.touches[0].clientY)},this.onWheel=t=>{this.state.itemDragged<0||(this.lastScroll=this.listRef.current.scrollTop+=t.deltaY,this.moveOtherItems())},this.onMove=(t,e)=>{if(-1===this.state.itemDragged)return null;l(this.ghostRef.current,e-this.state.initialY,this.props.lockVertically?0:t-this.state.initialX),this.autoScrolling(e),this.moveOtherItems()},this.moveOtherItems=()=>{const t=this.ghostRef.current.getBoundingClientRect(),e=t.top+t.height/2,s=a(this.getChildren()[this.state.itemDragged]),i=this.getYOffset();this.initialYOffset!==i&&(this.topOffsets=this.topOffsets.map((t=>t-(i-this.initialYOffset))),this.initialYOffset=i),this.isDraggedItemOutOfBounds()&&this.props.removableByMove?this.afterIndex=this.topOffsets.length+1:this.afterIndex=function(t,e){let s,i=0,n=t.length-1;for(;i<=n;){if(s=Math.floor((n+i)/2),!t[s+1]||t[s]<=e&&t[s+1]>=e)return s;t[s]<e&&t[s+1]<e?i=s+1:n=s-1}return-1}(this.topOffsets,e),this.animateItems(-1===this.afterIndex?0:this.afterIndex,this.state.itemDragged,s)},this.autoScrolling=t=>{const{top:e,bottom:s,height:i}=this.listRef.current.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;if(s>n&&n-t<u)this.setState({scrollingSpeed:Math.round((u-(n-t))/10),scrollWindow:!0});else if(e<0&&t<u)this.setState({scrollingSpeed:Math.round((u-t)/-10),scrollWindow:!0});else if(this.state.scrollWindow&&0!==this.state.scrollingSpeed&&this.setState({scrollingSpeed:0,scrollWindow:!1}),i+20<this.listRef.current.scrollHeight){let i=0;t-e<u?i=Math.round((u-(t-e))/-10):s-t<u&&(i=Math.round((u-(s-t))/10)),this.state.scrollingSpeed!==i&&this.setState({scrollingSpeed:i})}},this.animateItems=(t,e,s,i=!1)=>{this.getChildren().forEach(((n,o)=>{if(h(n,this.props.transitionDuration),e===o&&i){if(e===t)return l(n,null);l(n,e<t?this.itemTranslateOffsets.slice(e+1,t+1).reduce(((t,e)=>t+e),0):-1*this.itemTranslateOffsets.slice(t,e).reduce(((t,e)=>t+e),0))}else l(n,e<t&&o>e&&o<=t?-s:o<e&&e>t&&o>=t?s:null)}))},this.isDraggedItemOutOfBounds=()=>{const t=this.getChildren()[this.state.itemDragged].getBoundingClientRect(),e=this.ghostRef.current.getBoundingClientRect();return Math.abs(t.left-e.left)>e.width?(-1===this.state.itemDraggedOutOfBounds&&this.setState({itemDraggedOutOfBounds:this.state.itemDragged}),!0):(this.state.itemDraggedOutOfBounds>-1&&this.setState({itemDraggedOutOfBounds:-1}),!1)},this.onEnd=t=>{t.cancelable&&t.preventDefault(),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchup",this.schdOnEnd),document.removeEventListener("touchcancel",this.schdOnEnd);const e=this.props.removableByMove&&this.isDraggedItemOutOfBounds();!e&&this.props.transitionDuration>0&&-2!==this.afterIndex&&c((()=>{h(this.ghostRef.current,this.props.transitionDuration,"cubic-bezier(.2,1,.1,1)"),this.afterIndex<1&&0===this.state.itemDragged?l(this.ghostRef.current,0,0):l(this.ghostRef.current,-(window.pageYOffset-this.lastYOffset)-(this.listRef.current.scrollTop-this.lastListYOffset)+(this.state.itemDragged<this.afterIndex?this.itemTranslateOffsets.slice(this.state.itemDragged+1,this.afterIndex+1).reduce(((t,e)=>t+e),0):-1*this.itemTranslateOffsets.slice(this.afterIndex<0?0:this.afterIndex,this.state.itemDragged).reduce(((t,e)=>t+e),0)),0)}))(),this.dropTimeout=window.setTimeout(this.finishDrop,e||-2===this.afterIndex?0:this.props.transitionDuration)},this.finishDrop=()=>{const t=this.props.removableByMove&&this.isDraggedItemOutOfBounds();(t||this.afterIndex>-2&&this.state.itemDragged!==this.afterIndex)&&this.props.onChange({oldIndex:this.state.itemDragged,newIndex:t?-1:Math.max(this.afterIndex,0),targetRect:this.ghostRef.current.getBoundingClientRect()}),this.getChildren().forEach((t=>{h(t,0),l(t,null),t.style.touchAction=""})),this.setState({itemDragged:-1,scrollingSpeed:0}),this.afterIndex=-2,this.lastScroll>0&&(this.listRef.current.scrollTop=this.lastScroll,this.lastScroll=0)},this.onKeyDown=t=>{const e=this.state.selectedItem,s=this.getTargetIndex(t);if(!d(t.target,t.currentTarget)&&-1!==s){if(" "===t.key&&(t.preventDefault(),e===s?(e!==this.needle&&(this.getChildren().forEach((t=>{h(t,0),l(t,null)})),this.props.onChange({oldIndex:e,newIndex:this.needle,targetRect:this.getChildren()[this.needle].getBoundingClientRect()}),this.getChildren()[this.needle].focus()),this.setState({selectedItem:-1,liveText:this.props.voiceover.dropped(e+1,this.needle+1)}),this.needle=-1):(this.setState({selectedItem:s,liveText:this.props.voiceover.lifted(s+1)}),this.needle=s,this.calculateOffsets())),("ArrowDown"===t.key||"j"===t.key)&&e>-1&&this.needle<this.props.values.length-1){t.preventDefault();const s=a(this.getChildren()[e]);this.needle++,this.animateItems(this.needle,e,s,!0),this.setState({liveText:this.props.voiceover.moved(this.needle+1,!1)})}if(("ArrowUp"===t.key||"k"===t.key)&&e>-1&&this.needle>0){t.preventDefault();const s=a(this.getChildren()[e]);this.needle--,this.animateItems(this.needle,e,s,!0),this.setState({liveText:this.props.voiceover.moved(this.needle+1,!0)})}"Escape"===t.key&&e>-1&&(this.getChildren().forEach((t=>{h(t,0),l(t,null)})),this.setState({selectedItem:-1,liveText:this.props.voiceover.canceled(e+1)}),this.needle=-1),("Tab"===t.key||"Enter"===t.key)&&e>-1&&t.preventDefault()}},this.schdOnMouseMove=c(this.onMouseMove),this.schdOnTouchMove=c(this.onTouchMove),this.schdOnEnd=c(this.onEnd)}componentDidMount(){this.calculateOffsets(),document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1,capture:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart)}componentDidUpdate(t,e){e.scrollingSpeed!==this.state.scrollingSpeed&&0===e.scrollingSpeed&&this.doScrolling()}componentWillUnmount(){document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mousedown",this.onMouseOrTouchStart),this.dropTimeout&&window.clearTimeout(this.dropTimeout),this.schdOnMouseMove.cancel(),this.schdOnTouchMove.cancel(),this.schdOnEnd.cancel()}render(){const t={userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",boxSizing:"border-box",position:"relative"},e={...t,top:this.state.targetY,left:this.state.targetX,width:this.state.targetWidth,height:this.state.targetHeight,position:"fixed",marginTop:0};return o.createElement(o.Fragment,null,this.props.renderList({children:this.props.values.map(((e,s)=>{const i=s===this.state.itemDragged,n=s===this.state.selectedItem,o={key:s,tabIndex:this.props.values[s]&&this.props.values[s].disabled?-1:0,"aria-roledescription":this.props.voiceover.item(s+1),onKeyDown:this.onKeyDown,style:{...t,visibility:i?"hidden":void 0,zIndex:n?5e3:0}};return this.props.renderItem({value:e,props:o,index:s,isDragged:!1,isSelected:n,isOutOfBounds:!1})})),isDragged:this.state.itemDragged>-1,props:{ref:this.listRef}}),this.state.itemDragged>-1&&r.createPortal(this.props.renderItem({value:this.props.values[this.state.itemDragged],props:{ref:this.ghostRef,style:e,onWheel:this.onWheel},index:this.state.itemDragged,isDragged:!0,isSelected:!1,isOutOfBounds:this.state.itemDraggedOutOfBounds>-1}),this.props.container||document.body),o.createElement("div",{"aria-live":"assertive",role:"log","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0px",padding:"0px",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"}},this.state.liveText))}}g.defaultProps={transitionDuration:300,lockVertically:!1,removableByMove:!1,voiceover:{item:t=>`You are currently at a draggable item at position ${t}. Press space bar to lift.`,lifted:t=>`You have lifted item at position ${t}. Press j to move down, k to move up, space bar to drop and escape to cancel.`,moved:(t,e)=>`You have moved the lifted item ${e?"up":"down"} to position ${t}. Press j to move down, k to move up, space bar to drop and escape to cancel.`,dropped:(t,e)=>`You have dropped the item. It has moved from position ${t} to ${e}.`,canceled:t=>`You have cancelled the movement. The item has returned to its starting position of ${t}.`}};const p=g,m=window.wp.blockEditor,f=window.wp.components,v=s.p+"images/drag-icon.bf5485d3.png",O=JSON.parse('{"u2":"create-block/my-custom-block"}');(0,i.registerBlockType)(O.u2,{edit:t=>{const[e,s]=o.useState(t.attributes.locations),[i,r]=o.useState(),{attributes:{blocks:a}}=t,l=e=>{const i=[...t.attributes.locations];i.splice(e,1),t.setAttributes({locations:i}),s(i)},h=(s,i)=>{const n=[...e];n[i].address=s,t.setAttributes({locations:n})},c=(s,i)=>{const n=[...e];n[i].imgUrl=s.sizes.full.url,t.setAttributes({locations:n})};let d;return t.attributes.locations.length&&(d=(0,n.createElement)(p,{values:e,onChange:({oldIndex:t,newIndex:i})=>{var n,o,r;s((o=t,r=i,(n=(n=e).slice()).splice(r<0?n.length+r:r,0,n.splice(o,1)[0]),n))},renderList:({children:t,props:e})=>(0,n.createElement)("ul",{className:"drag-zone",...e},t),renderItem:({value:t,props:e})=>(0,n.createElement)("li",{className:"drag-item",...e},(0,n.createElement)("div",{className:"example-drag-handle"},(0,n.createElement)("img",{src:v}),(0,n.createElement)(f.TextControl,{id:"my-id",className:"grf__location-address",placeholder:"350 Fifth Avenue New York NY",value:t.address,onChange:t=>h(t,e.key)}),(0,n.createElement)(m.MediaUpload,{onSelect:t=>{c(t,e.key)},render:({open:e})=>t.imgUrl?(0,n.createElement)("button",{onClick:e,className:"image-slected"},(0,n.createElement)("img",{src:t.imgUrl})):(0,n.createElement)("button",{onClick:e}," Upload Image ")}),(0,n.createElement)(f.IconButton,{className:"grf__remove-location-address",icon:"no-alt",label:"Delete location",onClick:()=>l(e.key)})))})),[(0,n.createElement)(f.PanelBody,{title:"Repeater block"},d,(0,n.createElement)(f.Button,{isSmall:!0,variant:"primary",onClick:(()=>{const e=[...t.attributes.locations];e.push({address:"",imgUrl:""}),t.setAttributes({locations:e}),s(e)}).bind(void 0)},"Add row")),(0,n.createElement)(f.PanelBody,{title:"Link control"},(0,n.createElement)("div",null,(0,n.createElement)("h3",null,"Link control"),(0,n.createElement)(m.__experimentalLinkControl,{searchInputPlaceholder:"Search here...",value:t.attributes.post,settings:[{id:"opensInNewTab",title:"New tab?"},{id:"customDifferentSetting",title:"Has this custom setting?"}],onChange:e=>t.setAttributes({post:e}),withCreateSuggestion:!0,createSuggestion:e=>t.setAttributes({post:{...t.attributes.post,title:e,type:"custom-url",id:Date.now(),url:e}}),createSuggestionButtonText:t=>`New: ${t}`})))]},save:t=>{const e=t.attributes.locations.map(((t,e)=>(0,n.createElement)("p",{key:e},t.address)));return(0,n.createElement)("div",{className:t.className},(0,n.createElement)("h2",null,"Block"),e)}})}},s={};function i(t){var n=s[t];if(void 0!==n)return n.exports;var o=s[t]={exports:{}};return e[t](o,o.exports,i),o.exports}i.m=e,t=[],i.O=(e,s,n,o)=>{if(!s){var r=1/0;for(c=0;c<t.length;c++){s=t[c][0],n=t[c][1],o=t[c][2];for(var a=!0,l=0;l<s.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((t=>i.O[t](s[l])))?s.splice(l--,1):(a=!1,o<r&&(r=o));if(a){t.splice(c--,1);var h=n();void 0!==h&&(e=h)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[s,n,o]},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&!t;)t=s[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t+"../"})(),(()=>{var t={475:0,674:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var n,o,r=s[0],a=s[1],l=s[2],h=0;if(r.some((e=>0!==t[e]))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)var c=l(i)}for(e&&e(s);h<r.length;h++)o=r[h],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(c)},s=self.webpackChunkwhw_blocks=self.webpackChunkwhw_blocks||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var n=i.O(void 0,[674],(()=>i(474)));n=i.O(n)})();